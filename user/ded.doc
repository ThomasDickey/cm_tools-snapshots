<!OPS, Version = 5.2>

<!Document,
	Final Output Device =	"cx",
	Default Printer =	"cx">

<!Font Definitions,
	F27 = Classic 10,
	F30 = Classic 12,
	F21 = Typewriter 10,
	F34 = Classic 14 Bold,
	F31 = Classic 12 Bold,
	F32 = Classic 12 Italic,
	F6 = Symbols 12,
	F22 = Typewriter 12,
	F49 = Modern 12>

<!Page>

<!Autonumber Stream, List, 1>

<!Autonumber Stream, Outline, 3,
	Level 1 Symbol Type =	UPPER ROMAN,
	Level 2 Symbol Type =	UPPER ALPHA>

<!Class, bullet,
	Top Margin =		0.083 inches,
	Bottom Margin =		0 inches,
	Left Margin =		0.50 inches,
	First Indent =		-0.25 inches,
	Font =			F30>

<!Class, caption,
	Top Margin =		0.07 inches,
	Bottom Margin =		0.07 inches,
	Line Spacing =		1.100 lines,
	Font =			F30>

<!Class, fixed,
	Top Margin =		0.083 inches,
	Bottom Margin =		0.083 inches,
	Left Margin =		0.25 inches,
	Right Margin =		-1 inches,
	Line Spacing =		1.308 lines,
	Alignment =		Left,
	Font =			F21,
	Hyphenation =		off,
	Allow Page Break Within = no,
	Left Tab =		0/0.64*10 inches>

<!Class, footnote,
	Top Margin =		0.07 inches,
	Bottom Margin =		0.07 inches,
	Left Margin =		0.25 inches,
	First Indent =		-0.25 inches,
	Line Spacing =		1.100 lines,
	Font =			F30>

<!Class, header,
	Top Margin =		0.193 inches,
	Bottom Margin =		0 inches,
	Alignment =		Left,
	Font =			F34,
	Allow Page Break Within = no,
	Allow Page Break After = no>

<!Class, options,
	Top Margin =		0.042 inches,
	Bottom Margin =		0 inches,
	Left Margin =		1.50 inches,
	First Indent =		-1 inches,
	Font =			F30,
	Hyphenation =		off,
	Allow Page Break Within = no,
	Left Tab =		0/0.75/1.50 inches>

<!Class, paragraph,
	Top Margin =		0.083 inches,
	Bottom Margin =		0 inches,
	Left Margin =		0.25 inches,
	Font =			F30>

<!Class, subheader,
	Top Margin =		0.097 inches,
	Bottom Margin =		0 inches,
	Left Margin =		0.25 inches,
	Alignment =		Left,
	Font =			F31,
	Allow Page Break Within = no,
	Allow Page Break After = no>

<!Class, suboption,
	Top Margin =		0.042 inches,
	Bottom Margin =		0 inches,
	Left Margin =		2.50 inches,
	First Indent =		-1 inches,
	Font =			F30,
	Hyphenation =		off,
	Allow Page Break Within = no,
	Left Tab =		0/0.75/1.50 inches>

<!Master Frame,
	Name =			"At Anchor",
	Placement =		At Anchor,
	Width =			0.41 inches,
	Height =		0.137 inches,
	Vertical Alignment =	0.03 inches,
	Diagram =
V4,
(g9,32767,0
 (E10,0,0,0,1,1,0.053333,1,15,0,0,1,0,0,0,0,1,1,1,0.066667,0.066667,6,6,0,0.066
  667,6))>

<!Master Frame,
	Name =			Bottom,
	Placement =		Bottom of Page,
	Horizontal Alignment =	Center,
	Width =			5.70 inches,
	Height =		2.85 inches,
	Diagram =
V4,
(g9,32767,0
 (E10,0,0,0,1,1,0.053333,1,15,0,0,1,0,0,0,0,1,1,1,0.066667,0.066667,6,6,0,0.066
  667,6))>

<!Master Frame,
	Name =			"Following Anchor",
	Placement =		Following Anchor,
	Horizontal Alignment =	Center,
	Width =			5.70 inches,
	Height =		2.85 inches,
	Diagram =
V4,
(g9,32767,0
 (E10,0,0,0,1,1,0.053333,1,15,0,0,1,0,0,0,0,1,1,1,0.066667,0.066667,6,6,0,0.066
  667,6))>

<!Master Frame,
	Name =			"Following Text",
	Placement =		Following Text,
	Horizontal Alignment =	Center,
	Width =			5.70 inches,
	Height =		2.85 inches,
	Diagram =
V4,
(g9,32767,0
 (E10,0,0,0,1,1,0.053333,1,15,0,0,1,0,0,0,0,1,1,1,0.066667,0.066667,6,6,0,0.066
  667,6))>

<!Master Frame,
	Name =			Footnote,
	Placement =		Bottom of Page,
	Horizontal Alignment =	Left,
	Same Page =		yes,
	Width =			5.70 inches,
	Height =		0.204 inches,
	Diagram =
V4,
(g9,32767,0
 (E10,0,0,0,1,1,0.053333,1,15,0,0,1,0,0,0,0,1,1,1,0.066667,0.066667,6,6,0,0.066
  667,6))>

<!Master Frame,
	Name =			Top,
	Placement =		Top of Page,
	Horizontal Alignment =	Center,
	Width =			5.70 inches,
	Height =		2.85 inches,
	Diagram =
V4,
(g9,32767,0
 (E10,0,0,0,1,1,0.053333,1,15,0,0,1,0,0,0,0,1,1,1,0.066667,0.066667,6,6,0,0.066
  667,6))>

<Page Header, Frame =
V4,
(g9,1,0
 (t8,1,4,5.698608,0.438782,2,17,@nnclas12b,January\ 24\,\ 1989)
 (t8,2,4,2.849304,0.438782,1,17,@nnclas12b,Directory\ Editor)
 (t8,3,4,0,0.438782,0,17,@nnclas12b,ded)
 (E10,0,0,0,1,1,0.053333,1,15,0,0,1,0,0,0,1,1,1,1,0.066667,0.066667,6,6,0,0.066
  667,6))>

<Page Footer, Frame =
V4,
(g9,1,0
 (t8,1,4,5.698608,0.478772,2,17,@nnclas10,)
 (t8,2,4,2.849304,0.478772,1,17,@nnclas12b,-\ \240\ -)
 (t8,3,4,0,0.478772,0,17,@nnclas10,)
 (E10,0,0,0,1,1,0.053333,1,15,0,0,1,0,0,0,0,1,1,1,0.066667,0.066667,6,6,0,0.066
  667,6))>

<header>

<|,1>NAME

<paragraph>

<F31>ded<F0> <#1f> directory editor

<header>

USAGE

<paragraph>

<F31>ded<F32> [options] [file-specifications]

<header>

SYNOPSIS

<paragraph>

The directory editor provides the user with a full-screen interface 
to unix<F6>T<F0> files and directories.  Multiple lists of files 
may be displayed, sorted by various fields, and used in built-in or 
ordinary shell commands.  Navigation among directories is either hierarchical, 
or by means of a directory tree screen.

<header>

DESCRIPTION

<paragraph>

<F31>Ded<F0> provides you with a <F31>vi<F0>-like interface to files 
and directories.  Two types of displays are provided:

<bullet>

<F6>S<F0><Tab>file list.  One or more files are displayed, one per 
line.  The current working directory is shown at the top of the screen.  
The bottom of the screen (marked with a dividing line) is a work area 
in which shell commands may be issued, and their results displayed.  
You may move the cursor forward or backward through a file list, sort 
the list, and apply various commands to the files shown.

<F6>S<F0><Tab>directory tree.  One or more lines are shown, each 
representing a directory (or symbolic link to a directory).  You may 
move the cursor about the directory tree both by arrow keys, as well 
as by issuing commands to search for particular names.

<paragraph>

<F31>Ded<F0> manages multiple file lists; commands are provided for 
opening new lists from either a file list or from the directory tree.  
You may page between file lists, or back and forth to the directory 
tree.

Within a file list, you may mark groups of files on which subsequent 
commands will operate.  Both built-in and shell commands operate upon 
the marked files, and may be repeated for different files.

<F31>Ded<F0> uses the <F32>curses<SP>(3)<F0> screen management package 
and runs in a unix environment.

<header>

OPTIONS

<paragraph>

Most options are the same as display-manipulation commands.  They 
include:

<options>

<|,2>-<F31>G<F0><Tab>toggle user/group display field (initially 
displays user-identifiers).

-<F31>I<F0><Tab>toggle inode/links display field (initially displays 
number of links for each file).

-<F31>P<F0><Tab>toggle file-protection display field (initially displays 
file protection in <F31>ls<F0>-style).

-<F31>S<F0><Tab>toggle file size (in blocks) display field (normally 
displays only the size in bytes).

<F30@R>-<F31@R>t<F30@R> <F32@R>path<F30@R><Tab>read the directory tree file 
<#7f>.ftree" from the specified directory <F32@R>path<F30@R>.

-<F31>Z<F0><Tab>toggle rcs/sccs data display (normally inactive).

-<F31>z<F0><Tab>toggle rcs/sccs data display

-<F31>r <F32>key<F0><Tab>provide initial reverse-sort by <F32>key

-<F31>s <F32>key<F0><Tab>provide initial sort by <F32>key

<header>

OPERATIONS

<paragraph>

Most <F31>ded<F0> commands are single-character, like those of <F31>vi<F0>.  
Where appropriate, <F31>ded<F0> commands may be prefixed with a repeat <F32>co
unt<F0>.  (When not specified, the repeat <F32>count<F0> is always 
one).

<subheader>

Invoking DED

<paragraph>

When you invoke <F31>ded<F0>, it scans its argument list.  Options 
must precede file specifications.  Arguments which do not begin with 
<#7f>-" are treated as file specifications.

If only one file specification is given, <F31>ded<F0> checks to see 
if it is the name of a directory.  If so, <F31>ded<F0> changes its 
working directory to that, and shows all files which reside in the 
directory.  If any files are found, <F31>ded<F0> builds a display 
showing the files which it found, in an <F31>ls<F0>-like scrollable 
display.  If no arguments are given, <F31>ded<F0> assumes the current 
working directory, <#7f>.".

If more than one file specification argument is given, <F31>ded<F0> 
changes its working directory to the most common pathname among the 
arguments.  Note that if you give <F31>ded<F0> a wildcard argument 
such as <#7f>d*", then the <F30@U>shell<F0> performs wildcard expansion, 
not <F31>ded<F0>.

Items from the argument list which are not found are not displayed 
(though they are retained in the argument list for subsequent rescans 
with the <#7f><F31>R<F0>" command).  Arguments may be given in absolute 
or path-relative names (i.e., beginning with <#7f>/" or some sort 
of <#7f>.." construct).

<subheader>

<|,3>Exiting From DED

<paragraph>

To exit from <F31>ded<F0>, you must be in the file list display.  
If you are in the directory tree, typing <#7f><F31>q<F0>" (for <F31>qui<F0>t) 
will release the current file list and move to the next file list 
(if any).  Typing <#7f><F31>Q<F0>" moves backward. When only one 
file list is left, <F31>ded<F0> will toggle back to the file list 
display.  If there are a lot of file lists, it is faster to toggle 
back directly with <#7f><F31>D<F0>".  (A repeat <F32>count<F0> may 
be applied to the directory tree quit-command).

To exit from <F31>ded'<F0>s file list display, type <#7f><F31>q<F0>" 
(for <F31>quit<F0>).

<subheader>

Interrupting DED

<paragraph>

You may also forcibly exit from <F31>ded<F0> by typing your terminal's 
quit character.  This causes <F31>ded<F0> to exit without updating 
the <#7f>.ftree" file (the directory-tree database).

Some of <F31>ded<F0>'s commands may take a long while to execute.  
You may interrupt these commands by typing your terminal's interrupt 
character:

<bullet>

<F6>S<F0><Tab>The directory-tree <#7f><F31>R<F0>" command may be 
interrupted between individual files in the directory-scan.

<F6>S<F0><Tab>inline changes which propagate to a tagged group of 
files (i.e., the <#7f><F31>p<F0>", <#7f><F31>u<F0>", <#7f><F31>g<F0>" 
or <#7f><F31>=<F0>" commands) may be interrupted between individual 
files in the group.

<F6>S<F0><Tab>the <#7f><F31>t<F0>" and <#7f><F31>T<F0>" type-file 
command.

<subheader>

Cursor Movement and Scrolling

<paragraph>

Cursor movement in <F31>ded<F0> is styled after <F31>vi<F0> (i.e., 
the h, j, k and l keys).  However, since there are two types of displays, 
there are some differences:

<bullet>

<F6>S<F0><Tab>In file list displays, you may normally move the cursor 
only up and down.  This frees the left/right keys for other uses.  
As you move the cursor up and down in the display, it stays in the 
column immediately before the file names.  The <F32>left-arrow<F0> 
and <F32>right-arrow<F0> keys scroll the screen left and right, respectively.

<F6>S<F0><Tab>Movement in the directory tree is two-dimensional.  
You may move the cursor left or right (up or down levels of the directory 
tree) or up or down (to different directory names).  The screen display 
of the directory tree has markers (vertical bars or dashes) showing 
where you are allowed to put the cursor.  Vertical movement is normally 
within items at the same directory level.  You may move from one line 
to another irregardless of level by the <#7f><F31>J<F0>" and <#7f><F31>K<F0>" 
commands.

<paragraph>

Single-character cursor movement commands are:

<options>

<|,4><F31>h<F0><Tab>(directory): same as <F32>left-arrow<F0>.

<F31>k<F0><Tab>move cursor up <F32>count<F0> entries. (also: <F32>backspace
<F0>, <F32>up-arrow<F0>).

<F31>j<F0><Tab>move cursor down <F32>count<F0> entries. (also: <F32>return
<F0>, <F32>down-arrow<F0>).

<F31>l<F0><Tab>(directory): same as <F32>right-arrow<F0>.

<F31>f<F0><Tab>scroll forward <F32>count<F0> screen(s).

<F31>b<F0><Tab>scroll backward <F32>count<F0> screen(s).

<F32>left-arrow<F0><Tab>(file list): scroll left <F32>count<F0>/4 
screen(s).<HR>
(directory): move up <F32>count<F0> directory level(s).

<F32>right-arrow<F0><Tab>(file list): scroll right <F32>count<F0>/4 
screens.<HR>
(directory): move down <F32>count<F0> directory level(s).  The cursor 
is limited by the rightmost name on the current line.

<F31>J<F0><Tab>(directory): move down <F32>count<F0> lines(s).

<F31>K<F0><Tab>(directory): move up <F32>count<F0> line(s).

<F31>H<F0><Tab>moves cursor to the first entry on screen.

<F31>M<F0><Tab>moves cursor to the middle of screen.

<F31>L<F0><Tab>moves cursor to the last entry on screen.

<F31>^<F0><Tab>repositions the screen with current line at the top.

<paragraph>

Within either the file list or directory tree displays, you may scroll 
to different items in the ring of file lists.  Within a file list, 
the ring-scrolling pages to a different file list display.  Within 
the directory tree, the ring-scrolling simply moves the cursor (and 
changes the context marker) to the specified file list.

Ring-scrolling commands are:

<options>

<F31>F<F0><Tab>scroll forward (through the ring of file lists) <F32>count
<F0> entries.

<F31>B<F0><Tab>scroll backward (through the ring of file lists) <F32>count
<F0> entries.

<subheader>

Search Commands

<paragraph>

You may move the cursor by searching for a particular string.  The 
following search commands are provided a la <F31>vi<F0>:

<options>

<F31>/<F0><Tab><F31>Ded<F0> will prompt you for a regular expression.  
If you give it one, it will search forward (with wrap-around) for 
it.  A return without text will cancel the search.

<F31>?<F0><Tab><F31>Ded<F0> prompts you for a target and searches 
backwards (with wrap-around) for it.

<|,5><F31>n<F0><Tab>continue previous search (in the prevailing 
direction).

<F31>N<F0><Tab>continue the previous search, but in the reverse direction.

<paragraph>

<F31>Ded<F0> maintains a separate search context for the file list 
and the directory tree display.  That is, the targets are maintained 
separately.  Searches in the directory tree do not include the <#7f>/" 
marks which separate path names; you may search only for the leaf 
names.

<subheader>

Display-Adjustment

<paragraph>

You may use the following file-list commands to alter the format of 
the display, to refresh it, or to re-stat specific lines:

<options>

<F31>C<F0><Tab>toggle date-field to display.  Unix maintains three 
file dates (<F31>c<F0>hanged, <F31>m<F0>odified and <F31>a<F0>ccessed).  
The current state of this toggle is shown in the screen heading (e.g, 
<#7f><F22>[mtime]<F0>").

<F31>G<F0><Tab>toggle user/group display field.

<F31>I<F0><Tab>toggle inode/links display field.

<F31>P<F0><Tab>toggle file protection-mode (octal/normal) display 
field.  This is useful because occasionally the unix protection display 
is ambiguous.

<F31>S<F0><Tab>toggle the display of file size.  When active, an 
additional column is shown, giving the file size in blocks.

<F31>@<F0><Tab>toggle the display of symbolic links.  When active, <F31>ded
<F0> displays the mode, owner and group of the target of the link, 
rather than the link itself.  To make this simple to see, <F31>ded<F0> 
displays the mode in uppercase.  If you apply an inline command (i.e., 
<#7f><F31>p<F0>", <#7f><F31>u<F0>" or <#7f><F31>g<F0>") to a tagged 
group containing a symbolic link, <F31>ded<F0> will automatically 
toggle the display to display the targets rather than the links.

<F31>X<F0><Tab>toggles the screen between one and two viewports.  
You may adjust the size of these viewports with the <#7f><F31>A<F0>" 
and <#7f><F31>a<F0>" commands.  The two viewports share the same 
scrolling sense, but have an independent notion of the current file.

<F32>tab<F0><Tab>moves the cursor to the other viewport.

<F31>A<F0><Tab>move workspace marker up <F32>count<F0> line(s).

<F31>a<F0><Tab>move workspace marker down <F32>count<F0> line(s).

<|,6><F31>R<F0><Tab>re-scan argument list (refresh).  This clears 
file grouping, re-reads all of the directories specified in the argument 
list, re-sorts and repaints the screen.  The cursor is moved to the 
first file in the list.  (If nothing is found, <F31>ded<F0> will 
exit).

<Tab>Directory names which are encountered in the scan are added to 
the directory-tree.  If the <#7f><F31>@<F0>" toggle is set (see above), 
symbolic links which resolve to actual directories are also added.

<F31>W<F0><Tab>re-stat entries in the current screen.  If a repeat 
count is given, this command is repeated at 3-second intervals (or 
until interrupted).

<F31>w<F0><Tab>refresh (i.e., repaint) the window.  (Note: on Apollo, 
this command also checks to see if the terminal emulator window has 
changed size, and adjusts <F32>curses<F0> state to match).

<F31>l<F0><Tab>re-stat the current entry, as well as files which 
are grouped.  If a repeat count is given, this command is repeated 
at 3-second intervals (or until interrupted).

<F32>space<F0><Tab>clear workspace window.  This command is particularly 
useful after executing a shell command, since <F32>curses<F0> has 
no notion of what is shown in the workspace.

<F32>CTL/K<F0><Tab>causes a copy of your current screen (obtained 
from the curses window-state) to be appended to the file <#7f>ded.log" 
in your process's home directory.

<subheader>

Sorting the Display

<paragraph>

You may issue commands for sorting the file-list.  The cursor remains 
positioned at the same file after a sort.  (The directory tree is 
always sorted alphabetically).

<options>

<F31>r<F32>key<F0><Tab>reverse-sort entries.

<F31>s<F32>key<F0><Tab>sort entries in the <#7f>normal" order (dates 
and other numeric fields in descending order, names in ascending order).

<paragraph>

The <F32>key<F0> suffix denotes the fields which are compared, and 
are always a single character:

<options>

<F31>c<F0><Tab>last-change date

<F31>d<F0><Tab>directory-order (i.e., order in which items were read 
from the directory)

<|,7><F31>g<F0><Tab>group-identifier (lexically)

<F31>G<F0><Tab>group-identifier (numerically)

<F31>i<F0><Tab>inode

<F31>l<F0><Tab>number of links

<F31>p<F0><Tab>file-protection mask/mode.

<F31>m<F0><Tab>last-modification date

<F31>n<F0><Tab>filename

<F31@R>N<F30@R><Tab>filename leaf (i.e., without directory names)

<F31>r<F0><Tab>last-access date

<F31>s<F0><Tab>file size

<F31>t<F0><Tab>file type (after first <#7f>.")

<F31>T<F0><Tab>file type (after last <#7f>.")

<F31>u<F0><Tab>user-identifier (lexically)

<F31>U<F0><Tab>user-identifier (numerically)

<F31>v<F0><Tab>rcs/sccs versions

<F31>y<F0><Tab>rcs/sccs lock-owner

<F31>z<F0><Tab>rcs/sccs check-in dates

<F31>Z<F0><Tab>rcs/sccs check-in dates over modification dates

<F31>.<F0><Tab>sort, using <#7f>." characters as column-separators.

<paragraph>

You may sort tagged files separately from the remainder of the files 
by following the <#7f><F31>r<F0>" or <#7f><F31>s<F0>" character 
with a <#7f><F31>+<F0>".  For example, <#7f>s+w" sorts the file list 
into two parts, with the tagged files at the beginning, and untagged 
files following (both lists sorted by modification date).

<subheader>

Grouping Items in the Display

<paragraph>

Both the file-list and directory tree support the notion of tagging 
or grouping items in the display.  Groups in the file list mark files 
upon which commands can operate as a whole.  Directory tree groups 
are used to mark entries for purging from the database. The following 
commands mark and unmark items for the group:

<options>

<F31>+<F0><Tab>Add the <F32>count<F0> entries to the <F32>group<F0>.  
Grouped items are highlighted in the display.

<F31>-<F0><Tab>Remove the <F32>count<F0> entries from the <F32>group<F0>.

<F31>_<F0><Tab>Remove all entries from the <F32>group<F0>.

<|,8><F31@R>#<F30@R><Tab>Tags all files which are currently sorted adjacent 
in the file list, which have the same sort-key.  For instance, if 
the list is sorted by modification date, the <#7f><F31@R>#<F30@R>" command 
tags all files which have the same modification date as any neighbor.

<subheader>

Inline Editing of the File List

<paragraph>

<F31>Ded<F0> provides you with several built-in commands to modify 
fields of the display.  An inline editing command is initiated with 
a single character.  Typing this character again (while in <F31>cursor<F0> 
mode!) toggles out of the inline editor.

Initially, the inline editor is in <F31>cursor<F0> mode.  If you 
are editing a text field (i.e., user-identifier, group-identifier 
or file-name), then you may toggle to to <F31>insert<F0> mode type 
typing <F32>CTL/I<F0> (<F32>tab<F0>).

<options>

<F31>q<F0><Tab>(cursor) aborts the command.

<F32>command<F0><Tab>(cursor) completes the command.  A <F32>newline<F0> 
or <F32>return<F0> in either mode will also complete it.

<F32>printing<F0><Tab>(insert) Typing a printing character while 
in <F31>insert<F0> mode causes that character to be inserted into 
the field.

<F32>erase-char<F0><Tab>(insert) deletes the character to the left 
of the cursor.

<F32>kill-char<F0><Tab>(insert) deletes the character at the cursor 
position.

<F32>left-arrow<F0><Tab>(cursor) moves cursor left one column within 
the edited field.  The <F32>backspace<F0> key does the same operation.

<F32>right-arrow<F0><Tab>(cursor) moves cursor right one column within 
the edited field.  The <F32>form-feed<F0> (<F32>CTL/L<F0>) key does 
the same thing.

<F32>CTL/I<F0><Tab>toggles between <F31>cursor<F0> and <F31>insert<F0> 
modes.  While in <F31>cursor<F0> mode for text fields, the field 
is highlighted and prefixed with a <#7f>^" character.

<F32>CTL/B<F0><Tab>move cursor to beginning of field

<F32>CTL/F<F0><Tab>move cursor to end of field

<subheader>

Built-in Operations on Groups of Files

<paragraph>

File-oriented commands operate on the current entry.  Where appropriate, 
commands operate on a tagged <F32>group<F0> of entries as well.  
(If any files are grouped, the file list heading is highlighted).

<options>

<F31>p<F0><Tab>Edit protection-code for <F32>group<F0> of entries.  
The code from the current entry is edited inline.  The result is used 
for all selected entries.  Editing is done with single characters:

<suboption>

<|,9><F31>p<F0><Tab>complete command

<F31>q<F0><Tab>abort command

<F32>[0-7]<F0><Tab>set chmod-field

<F32>space<F0><Tab>move cursor right 3 columns (or the next octal 
digit if the <#7f><F31>P<F0>" toggle is in effect).

<F32>backspace<F0><Tab>move cursor left 3 columns (or to the previous 
octal digit if the <#7f><F31>P<F0>" toggle is in effect).

<F31>P<F0><Tab>toggles display mode (current line only) between octal 
and normal.

<F31>s<F0><Tab>toggles <#7f>set user id" or <#7f>set group id" bit, 
according to the position of the cursor.

<F31>t<F0><Tab>toggles <#7f>save swapped text" bit if cursor points 
to the last chmod field.

<options>

<F31>u<F0><Tab>Edit user-identifier field.  The current entry's <F32>uid<F0> 
is edited inline and the result used for all selected entries.

<F31>g<F0><Tab>Edit group-identifier field.  The current entry's <F32>gid
<F0> is edited inline, and the result used for all selected entries

<F31>=<F0><Tab>Edit name of current file.  Files which are grouped 
are renamed using the <F30@U>template<F0> formed by your command.  
For example, you might rename files ending in <#7f>.o" to end in <#7f>.bin" 
by typing <#7f><F31>=<F0><SP><F32>CTL/F<F0><SP><F32>CTL/I<F0> <F32>erase
<F0> <F31>.bin<F0>".

<F31>><F0><Tab>Edit link-text of the current symbolic link.  Symbolic 
links which are grouped are renamed using the <F30@U>template<F0> formed 
by your command.  For example, you might edit links beginning with 
<#7f>/local/bin" to begin with <#7f>/usr/local/bin" by typing  <#7f><F31>=
<F0><SP><F32>CTL/I<F0> <F31>/usr<F0>".  <F30@R>The special substrings 
<#7f><F31@R>%F<F30@R>" and <#7f><F31@R>%B<F30@R>" are translated into the 
forward and backward directory paths in the ring of file lists.

<F31>"<F0><Tab>Repeats the last <#7f><F31>p<F0>", <#7f><F31>u<F0>", 
<#7f><F31>g<F0>" or <#7f><F31>=<F0>" command.  This uses the actual 
set of characters typed for the command, so an editing template may 
be made.  (<F31>Ded<F0> buffers the last set of editing keystrokes 
for inline editors).

<subheader>

Creating New Entries

<paragraph>

You may add new entries to the display list by rescanning with the 
<#7f><F31>R<F0>" command (to pick up new names which are added by 
programs other than <F31>ded<F0>.  You may also use <F31>ded<F0> 
to create new entries using the <#7f><F31>c<F0>" command:

<options>

<|,10><F31>cf<F0><Tab>create file

<F31>cd<F0><Tab>create directory

<F31>cl<F0><Tab>create symbolic link (initially with <#7f>." for 
text).

<paragraph>

Each <#7f><F31>c<F0>" command opens the list at the current position.  
You must provide a name, using the same inline name-editing as the 
<#7f><F31>=<F0>" command.  When the name is complete (nonnull, and 
nonconflicting), <F31>ded<F0> creates it.

<subheader>

Built-in Operations on the Current File

<paragraph>

The following built-in operations operate only on the current file, 
because grouping operations would not be meaningful:

<options>

<F31>E<F0><Tab>If the current entry is a directory, open a new file 
list on it.  The new list inherits the display options and sorting 
sense, as well as the last shell command from the current display.  
If the entry is a file, invoke the editor (e.g., <F31>vi<F0>) on 
it.

<F31>e<F0><Tab>If the current entry is a directory, spawn a new <F31>ded<F0> 
process with that as argument. If it is a file, invoke the editor 
(e.g., <F31>vi<F0>) on it.

<F31>v<F0><Tab>If the current entry is a directory, spawn a new <F31>ded<F0> 
process with that as argument. If it is a file, invoke the browser 
(e.g, <F31>view<F0>).

<F31>m<F0><Tab>run the pager (e.g., <F31>more<F0>) on the current 
file.  <F31>Ded<F0> will not let you page directories or other entries 
which are not regular files.

<paragraph>

On return from the editor, browser and pager, <F31>ded<F0> prompts 
you (for a <F32>return<F0>) and then repaints the screen.

<F31>Ded<F0> provides you with a pager which operates in the workspace.  
For small files, or for just peeking at things, this works much faster 
than spawning a copy of <F31>more<F0>.  The workspace pager displays 
either text or binary files:

<bullet>

<F6>S<F0><Tab>When displaying text files, <F31>ded<F0> shows multiple 
blank lines as a single blank line, and shows overstruck or underlined 
text with highlighting.  (<F31>Ded<F0> interprets <F32>backspaces<F0> 
and <F32>returns<F0> in text files).  You may scroll left or right 
in the pager to see very long lines.

<F6>S<F0><Tab>When displaying binary files, <F31>ded<F0> shows 
control characters as <#7f>.".  Non-ASCII characters (i.e., having 
the high-order bit set) are converted to ASCII (by stripping this 
bit) and shown highlighted.

<paragraph>

As you scroll through the file, the pager shows the percentage which 
you have viewed a la <F31>more<F0>.  You may use the following subcommands 
within the workspace pager:

<options>

<|,11><F31>q<F0><Tab>quit the pager.  To prevent accidentally quitting <F31>de
d<F0>, an immediately succeeding <#7f><F31>q<F0>" command will clear 
the workspace.

<F31>w<F0><Tab>repaint the screen.

<F32>CTL/K<F0><Tab>causes a copy of your current screen (obtained 
from the curses window-state) to be appended to the file <#7f>ded.log" 
in your process's home directory.

<F31>A<F0><Tab>move the workspace marker up <F32>count<F0> lines, 
redisplay.

<F31>a<F0><Tab>move the workspace marker down <F32>count<F0> lines, 
redisplay.

<F31>f<F0><Tab>scroll forward <F32>count<F0> subscreens (also, the <F32>space
<F0> and <F32>newline<F0> keys).

<F31>b<F0><Tab>scroll backward <F32>count<F0> subscreens (also, 
the <F32>backspace<F0> key).

<F32>left-arrow<F0><Tab>scroll left <F32>count<F0>/4 screens.

<F32>right-arrow<F0><Tab>scroll right <F32>count<F0>/4 screens.

<paragraph>

The following commands use the workspace pager:

<options>

<F31>h<F0><Tab>type <F31>ded<F0>'s help-file in the workspace.

<F31>t<F0><Tab>type the current file, in the workspace

<F31>T<F0><Tab>type the current binary file, in the workspace

<subheader>

Shell commands

<paragraph>

Shell commands are executed in the work-area.  <F31>Ded<F0> invokes 
the Bourne shell via the <F32>system<SP>(2)<F0> call.

<options>

<F31>!<F0><Tab>Prompt for, and execute a shell command.

<F31>%<F0><Tab>Prompt for, and execute a shell command, prompting 
(for <F32>return<F0>) and repainting screen afterwards.

<F31>*<F0><Tab>Display text of last <#7f><F31>!<F0>" or <#7f><F31>%<F0>" 
command.

<F31>:<F0><Tab>Edit text of last <#7f><F31>!<F0>" or <#7f><F31>%<F0>" 
command, re-execute.

<F31>.<F0><Tab>Re-execute last <#7f><F31>!<F0>" or <#7f><F31>%<F0>" 
command.

<subheader>

Command Substitution

<paragraph>

In any shell command which you issue via <F31>ded<F0>, you may use 
the special character <#7f><F31>#<F0>" to cause <F31>ded<F0> to 
substitute the names of the current- and grouped-files.  (A <#7f>\" 
preceding a <#7f><F31>#<F0>" overrides this).

You may do more elaborate substitution on the current file using a 
two-character sequence beginning with <#7f>%":

<options>

<F31>F<F0><Tab>substitutes the name of the following directory in 
the ring of file lists.

<|,12><F31>B<F0><Tab>substitutes the name of the directory before 
the current one, in the ring of file lists.

<F31>D<F0><Tab>substitutes the name of the original directory from 
which <F31>ded<F0> was invoked.

<F31>d<F0><Tab>substitutes the name of the current directory.

<F31>n<F0> or <F31>N<F0><Tab>substitutes the name of the current 
file
<Frame,
	Name =			Footnote,
	Placement =		Bottom of Page,
	Horizontal Alignment =	Left,
	Same Page =		yes,
	Width =			5.70 inches,
	Height =		0.65 inches,
	Page # =		12,
	Diagram =
V4,
(g9,1,0
 (T8,1,12,0.066667,0.066667,5.546669,1,0.333333,0,516,0,17,0,0,0,0,0,0,1,1,2048
  ,512,102,1101,3,
<footnote>

<F6>[<F0><Tab>The <F31>N<F0>, <F31>H<F0>, <F31>R<F0> and <F31>E<F0> 
substitutions are performed after concatenating the current filename 
with the current directory, to make an absolute pathname.

<End Text>)
 (v4,2,0,-0.066667,0,0.933333,0,17,1,0)
 (E10,0,0,0,1,1,0.053333,1,15,0,0,1,0,0,0,0,1,1,1,0.066667,0.066667,6,6,0,0.066
  667,6))>
<F6>[<F0>.

<F31>h<F0> or <F31>H<F0><Tab>substitutes the name of the current 
file, after removing the last component (i.e., <#7f>head").

<F31>r<F0> or <F31>R<F0><Tab>substitutes the name of the current 
file, removing <#7f><F32>.xxx<F0>" part (i.e., <#7f>root").

<F31>e<F0><Tab>substitutes the current filename, removing all but 
the <#7f><F32>.xxx<F0>" part (i.e., <#7f>extension").

<F31>t<F0><Tab>substitutes the current filename, removing all leading 
pathname components (i.e., <#7f>tail").

<paragraph>

Dollar signs and other special characters in filenames which could 
cause problems in command substitution are escaped (prefixed with 
<#7f>\") by <F31>ded<F0> as it substitutes filenames into the shell 
command.

<subheader>

Command Editing

<paragraph>

You may edit any shell command which you issue to <F31>ded<F0>, either 
before it is issued, or after, when using the <#7f>:" command.  Command 
editing is done in either <F31>insert<F0> or <F31>cursor<F0> modes.  <F31>Ded
<F0> is initially in <F31>insert<F0> mode.  When it is in <F31>cursor<F0> 
mode, the character prefixing the command-entry is set to a <#7f>^".   
Command editing controls are similar to the inline editor, except:

<bullet>

<F6>S<F0><Tab>A repeat <F32>count<F0> may be prefixed to any subcommand 
in cursor mode.

<F6>S<F0><Tab>Commands may be continued (with <F31>ded<F0> controlling 
wraparound) as long as space remains in the workspace to enter new 
command text.

<F6>S<F0><Tab>A <F32>kill<F0> character in <F31>insert<F0> mode 
aborts the command.  In <F31>cursor<F0> mode, it deletes the <F32>count<F0> 
characters at the cursor position.

<subheader>

Directory Tree

<paragraph>

<F31>Ded<F0> maintains a database of directory names.  You may scroll 
in this display, as well as enter a new <F31>ded<F0> process from 
it.  Cursor movement may be done not only up and down as in the file 
list, but also left and right.  The <#7f><F31>/<F0>", <#7f><F31>?<F0>", 
<#7f><F31>n<F0>" and <#7f><F31>N<F0>" search commands work in the 
directory-tree (though they find only leaf names, rather than full 
paths).

<|,13>Commands which manipulate <F31>ded<F0>'s file list state are:

<options>

<F31>D<F0><Tab>Toggle between directory-tree and file-list display.  <F31>Ded
<F0> will show the most recently selected file list, which is marked 
with <#7f><F22>=><F0>".

<F31>E<F0><Tab>Enter a new file-list at the indicated directory-name.

<F31>e<F0><Tab>Enter a new <F31>ded<F0> process with the indicated 
directory name.

<F31>F<F0><Tab>Move forward (with wraparound) in the ring of file 
lists.

<F31>B<F0><Tab>Move backward (with wraparound) in the ring of file 
lists.

<F31>W<F0><Tab>writes the database file (if changes have occurred).

<paragraph>

Commands which modify the display characteristics are:

<options>

<F31@R>A<F30@R><Tab>Sets a flag which causes <F31@R>ded<F30@R> to suppress 
names (and their dependents) which begin with <#7f>." or <#7f>$".

<F31>I<F0><Tab>Sets a runtime flag which disables searches into subtrees 
which are made invisible with <#7f>V".

<F31>V<F0><Tab>Sets a flag in the database for the current entry 
which directs <F31>ded<F0> to suppress subdirectories from the display.

<F31>w<F0><Tab>Repaint the display.

<F31>Z<F0><Tab>Directs <F31>ded<F0> to suppress from the display 
all RCS and sccs directories.

<paragraph>

Commands which operate upon the directory database are:

<options>

<F31>R<F0><Tab>Read directory names at the current position (also 
done automatically whenever a file list is constructed).  If you supply 
a repeat-count, <F31>ded<F0> recurs that many levels.

<Tab>Unlike the <#7f>R" command in the file-list display, this command 
always attempts to resolve symbolic links to directories.

<F31>+<F0><Tab>Mark directory name for removal from database.

<F31>-<F0><Tab>Unmark directory name.

<F31>_<F0><Tab>Clear list of marked names.

<F31>p<F0><Tab>Purge marked names from the database.

<F31>@<F0><Tab><F31>Ded<F0> moves your cursor to the header.  You 
may edit the path name, causing <F31>ded<F0> to jump to the newly 
specified path.  The path name need not be present in the directory 
tree; if it is not, it will be entered into the tree.

<F31@R>~<F30@R><Tab>Like the <#7f><F31@R>@<F30@R>" command, this is used to 
reposition the cursor within the tree.  Instead of editing the current 
path name, you are given the home directory token <#7f>~".

<subheader>

<|,14>RCS and SCCS Commands

<paragraph>

<F31>Ded<F0> provides you with a visual interface to <F32>rcs<F0> 
(<F31>r<F0>evision <F31>c<F0>ontrol <F31>s<F0>ystem) and <F32>sccs<F0> 
(<F31>s<F0>ource <F31>c<F0>ode <F31>c<F0>ontrol <F31>s<F0>ystem) 
files.

<bullet>

<F6>S<F0><Tab>For a given file, the corresponding <F32>rcs<F0> 
files (by convention) reside in a subdirectory called <#7f>RCS".  
The <F32>rcs<F0> file names are formed by suffixing the given file 
name with two characters (i.e., <#7f>,v").

<F6>S<F0><Tab>For a given file, the corresponding <F32>sccs<F0> 
files (by convention) reside in a subdirectory called <#7f>sccs".  
The sccs file names are formed by prefixing the given file name with 
two characters (e.g., <#7f>p." and <#7f>s.").

<paragraph>

<F31>Ded<F0> assumes that the <F32>rcs<F0> files are checked in 
using the script <F31>rcsput<F0>, and that the <F32>sccs<F0> files 
are checked in using the script <F31>sccsput<F0>.  These scripts 
extend the basic <F32>rcs<F0> and <F32>sccs<F0> scheme by making 
the file's date and the archival check-in date the same.  When directed 
to do so, <F31>ded<F0> will scan the archived files to obtain and 
display the most recent check-in date and version.  A special display 
column shows the result of the comparison between the file's modification 
and check-in dates:

<options>

<F32>blank<F0><Tab>no corresponding archive file was found.

<F31>=<F0><Tab>the check-in and modification dates match.

<F31><<<F0><Tab>the file's modification date is later than the check-in 
date.

<F31>><F0><Tab>the file's modification date is earlier than the check-in 
date.

<paragraph>

Using <F31>ded<F0>, you can quickly verify which files have been 
checked into <F32>rcs<F0> or <F32>sccs<F0>.  <F31>Ded<F0>'s sorting 
options (i.e., the <#7f><F31>v<F0>", <#7f><F31>y<F0>", <#7f><F31>z<F0>", 
and <#7f><F31>Z<F0>" keys) facilitate this also.

The following file list commands are used for archive display:

<options>

<F31>V<F0><Tab>toggle version display.

<F31>Y<F0><Tab>toggle display showing the owner of the current lock 
on the file.  <F31>Ded<F0> examines the <F32>rcs<F0> archive file 
to see if there are any locks on it.  If so, it displays the name 
of the first lock-owner
<Frame,
	Name =			Footnote,
	Placement =		Bottom of Page,
	Horizontal Alignment =	Left,
	Same Page =		yes,
	Width =			5.70 inches,
	Height =		0.417 inches,
	Page # =		14,
	Diagram =
V4,
(g9,1,0
 (T8,1,12,0.066667,0.066667,5.546669,1,0.333333,0,516,0,17,0,0,0,0,0,0,1,1,2048
  ,512,102,1101,3,
<footnote,
	Font =			F30@R>

<F6>[<F30><Tab><F31>Ded<F30> does not currently examine the <F32>sccs<F30> 
<#7f>p." file to find a corresponding lock.  It displays a <#7f>?" 
for this case.

<End Text>)
 (v4,2,0,-0.033333,0,0.966667,0,17,1,0)
 (E10,0,0,0,1,1,0.053333,1,15,0,0,1,0,0,0,0,1,1,1,0.066667,0.066667,6,6,0,0.066
  667,6))>
<F6>[<F0>.

<F31>Z<F0><Tab>toggle check-in date display.  The date display has 
three states: off, invisible (except for the comparison column), and 
visible.  If the archive display is initially off, <F31>ded<F0> must 
scan all of the files in the current directory to see which have a 
corresponding <F32>rcs<F0> <#7f>,v" or <F32>sccs<F0> <#7f>s." file, 
and then to extract the check-in date and version number.

<|,15><F31>z<F0><Tab>clears archive display.  Normally the archive 
display is inactive, since it does slow <F31>ded<F0>.  If you accidentally 
type <#7f><F31>z<F0>", you can recover the data immediately with 
a <#7f><F31>Z<F0>" command.  <F31>Ded<F0> does not reset the archive 
display data until directed to do so by a re-stat command (e.g., <#7f><F31>R
<F0>", <#7f><F31>W<F0>" or <#7f><F31>l<F0>").

<paragraph>

Viewing the check-in date information from within an archive directory 
shows the comparison of the <F30@U>archived<F0> file's modification 
date with the corresponding file modification date.  This is mostly 
useful for showing archived files for which there is no corresponding 
checked-out file.

<subheader>

Apollo DOMAIN/IX Enhancements

<paragraph>

<F31>Ded<F0> runs under Apollo DOMAIN/IX SR9 within a VT100 terminal 
emulator window.

You may use the Apollo display manager to change the size of the window 
(there is nothing sacred about 24 lines and 80 columns).  The <#7f><F31>w<F0>" 
repaint command of <F31>ded<F0> is used to adjust the screen if you 
change the screen size.

Under Apollo SR9, there are two serious unix incompatibilities which <F31>ded
<F0> addresses: file modification dates and case-sensitivity in file 
names.  When you use <F31>ded<F0>'s built-in commands (e.g., <#7f><F31>p<F0>"
, <#7f><F31>u<F0>" and <#7f><F31>g<F0>"), <F31>ded<F0> replaces 
the original file modification date since the Apollo <F32>chmod<F0> 
and <F32>chown<F0> system calls merge the change- and modification-dates.

Case-sensitivity in file names is a more interesting problem.  DOMAIN/IX 
runs in conjunction with Apollo's AEGIS operating system.  AEGIS file 
names are not case sensitive.  Some AEGIS SR9 utilities do not work 
properly if given unix-style mixed-case names.  <F31>Ded<F0> can 
show file names in either AEGIS or unix form.  When it shows names 
in AEGIS form, it will also convert names in shell commands (e.g., 
those substituted with <#7f><F31>#<F0>") to AEGIS-style as well.

Apollo-specific <F31>ded<F0> commands are:

<options>

<F31>U<F0><Tab>toggle filename display (unix versus AEGIS).  In AEGIS 
mode, uppercase characters are shown with a <#7f>:" prefix.

<F32>CTL/E<F0><Tab>edit the current file with the pad-editor.  <F31>Ded<F0> 
waits until you have closed the pad before continuing
<Frame,
	Name =			Footnote,
	Placement =		Bottom of Page,
	Horizontal Alignment =	Left,
	Same Page =		yes,
	Width =			5.70 inches,
	Height =		0.667 inches,
	Page # =		15,
	Diagram =
V4,
(g9,1,0
 (T8,1,12,0.066667,0.12,5.546669,1,0.333333,0,516,0,17,0,0,0,0,0,0,1,1,2048,512
  ,102,1101,3,
<footnote>

<F6>[<F0><Tab>Due to a bug in the Apollo <F32>pad_$edit_wait<F0> 
call, you cannot use the display manager RO command to toggle the 
edit pad from read/write to read-only and back again <#1f> it works 
only in one direction.

<End Text>)
 (v4,2,0,-0.1,0,0.9,0,17,1,0)
 (E10,0,0,0,1,1,0.053333,1,15,0,0,1,0,0,0,0,0,1,1,0.066667,0.066667,6,6,0,0.066
  667,6))>
<F6>[<F0>.

<|,16><F32>CTL/V<F0><Tab>view the current file with the pad-editor.  <F31>Ded
<F0> does not wait for the pad to be closed; it will proceed to accept 
new commands.

<subheader>

X Windows Enhancments

<paragraph>

If you are not running under the Apollo Display Manager, <F31>ded<F0> 
tentatively assumes that you are running under X<SP>Windows<F6>T<F0>.  
In this case, if the program <F31>xterm<F0> is found in your execution 
path, <F31>ded<F0> will permit the following commands:

<options>

<F32>CTL/E<F0><Tab>edit the current file (using the default editor 
invoked by the <#7f><F31>e<F0>" command) in an <F31>xterm<F0> process.  
<F31>Ded<F0> waits until you have exited from the process before 
continuing.

<F32>CTL/V<F0><Tab>view the current file (using the default browser 
invoked by the <#7f><F31>v<F0>" command) in an <F31>xterm<F0> process.  
<F31>Ded<F0> does not wait for you to exit from this process; it 
will proceed to accept new commands.

<header>

ENVIRONMENT

<paragraph>

<F31>Ded<F0> uses the following environment variables:

<options>

<F49>PATH<F0><Tab>used to establish where <F31>ded<F0> is run from, 
so that the help file can be found.

<F49>EDITOR<F0><Tab>overrides default editor invoked by <#7f><F31>e<F0>" 
command (<F31>vi<F0>)

<F49>BROWSE<F0><Tab>overrides default browser invoked by <#7f><F31>v<F0>" 
command (view).

<F49>PAGER<F0><Tab>overrides default pager invoked by <#7f><F31>m<F0>" 
command (more).

<F49>TERM<F0><Tab>used to determine control sequences for cursor 
keys.

<F49>RCS_DIR<F0><Tab>gives the name of the <F32>rcs<F0> directories <F31>ded
<F0> searches for the file list <#7f><F31>V<F0>", <#7f><F31>Y<F0>" 
and <#7f><F31>Z<F0>" commands.  If not specified, <F31>ded<F0> assumes 
<#7f>RCS".

<F49>SCCS_DIR<F0><Tab>gives the name of the <F32>sccs<F0> directories <F31>de
d<F0> searches for the file list <#7f><F31>V<F0>", <#7f><F31>Y<F0>" 
and <#7f><F31>Z<F0>" commands.  If not specified, <F31>ded<F0> assumes 
<#7f>sccs".

<header>

FILES

<paragraph>

When executed, <F31>ded<F0> determines (by inspecting the zero'th 
argument passed to it by the shell, as well as the contents of the <F49>PATH
<F0> variable) where it was executed from.  Its help file <F32>ded.hlp<F0> 
is assumed to reside in the same directory.

<|,17>The directory tree manager maintains its database in your home 
directory (i.e., the path is derived from your process's uid).  The 
name of the file is <#7f><F32>.ftree<F0>".  If changes have been 
made to the memory copy of the database, this file is updated whenever <F31>ded
<F0> spawns a copy of itself, or when exiting from <F31>ded<F0>.

<header>

ANTICIPATED CHANGES

<paragraph>

Make spawned <F31>ded<F0> processes inherit display options from 
the current one.

Provide more transparent use of symbolic links (in the directory tree), 
including storing and showing link text.

Add a directory-rename command to the directory-tree display.  Note 
that this would be the only command in the directory-tree to actually 
alter the directory structure.

Enhance the treatment of multiple viewports.  This would permit the 
user to group files in one file list and then move the cursor to another 
file list to operate upon the group files (e.g., a bulk move without 
typing a path name).  Additionally, the user would be able to sort 
the viewports independently, as well as operate upon different directories 
(from the directory-ring).

Use the <F49>SHELL<F0> environment variable, and parse arguments 
so that shell commands need not use the Bourne shell.

<header>

SEE ALSO

<paragraph>

rcsput, rcsget, sccsput, sccsget

<header>

AUTHOR:

<paragraph>

Thomas Dickey (Software Productivity Consortium).

