<!OPS, Version = 5.2>

<!Document,
	Final Output Device =	"cx",
	Default Printer =	"cx">

<!Font Definitions,
	F30 = Classic 12,
	F21 = Typewriter 10,
	F27 = Classic 10,
	F34 = Classic 14 Bold,
	F31 = Classic 12 Bold,
	F32 = Classic 12 Italic,
	F6 = Symbols 12,
	F49 = Modern 12>

<!Page>

<!Autonumber Stream, List, 1>

<!Autonumber Stream, Outline, 3,
	Level 1 Symbol Type =	UPPER ROMAN,
	Level 2 Symbol Type =	UPPER ALPHA>

<!Class, bullet,
	Top Margin =		0.083 inches,
	Bottom Margin =		0 inches,
	Left Margin =		0.50 inches,
	First Indent =		-0.25 inches,
	Font =			F30>

<!Class, caption,
	Top Margin =		0.07 inches,
	Bottom Margin =		0.07 inches,
	Line Spacing =		1.100 lines,
	Font =			F30>

<!Class, fixed,
	Top Margin =		0.083 inches,
	Bottom Margin =		0.083 inches,
	Left Margin =		0.50 inches,
	Right Margin =		-1 inches,
	Line Spacing =		1.308 lines,
	Alignment =		Left,
	Font =			F21,
	Hyphenation =		off,
	Allow Page Break Within = no,
	Left Tab =		0/0.64*10 inches>

<!Class, footnote,
	Top Margin =		0.07 inches,
	Bottom Margin =		0.07 inches,
	Left Margin =		0.25 inches,
	First Indent =		-0.25 inches,
	Line Spacing =		1.100 lines,
	Font =			F30,
	Hyphenation =		off>

<!Class, header,
	Top Margin =		0.193 inches,
	Bottom Margin =		0 inches,
	Alignment =		Left,
	Font =			F34,
	Allow Page Break Within = no,
	Allow Page Break After = no>

<!Class, options,
	Top Margin =		0.042 inches,
	Bottom Margin =		0 inches,
	Left Margin =		1.50 inches,
	First Indent =		-1 inches,
	Font =			F30,
	Hyphenation =		off,
	Allow Page Break Within = no,
	Left Tab =		0/0.75/1.50 inches>

<!Class, paragraph,
	Top Margin =		0.083 inches,
	Bottom Margin =		0 inches,
	Left Margin =		0.25 inches,
	Font =			F30>

<!Class, subheader,
	Top Margin =		0.097 inches,
	Bottom Margin =		0 inches,
	Left Margin =		0.25 inches,
	Alignment =		Left,
	Font =			F31,
	Allow Page Break Within = no,
	Allow Page Break After = no>

<!Class, suboption,
	Top Margin =		0.042 inches,
	Bottom Margin =		0 inches,
	Left Margin =		2.50 inches,
	First Indent =		-1 inches,
	Font =			F30,
	Hyphenation =		off,
	Allow Page Break Within = no,
	Left Tab =		0/0.75/1.50 inches>

<!Master Frame,
	Name =			"At Anchor",
	Placement =		At Anchor,
	Width =			0.41 inches,
	Height =		0.137 inches,
	Vertical Alignment =	0.03 inches,
	Diagram =
V4,
(g9,32767,0
 (E10,0,0,0,1,1,0.053333,1,15,0,0,1,0,0,0,1,1,1,1,0.066667,0.066667,6,6,0,0.066
  667,6))>

<!Master Frame,
	Name =			Bottom,
	Placement =		Bottom of Page,
	Horizontal Alignment =	Center,
	Width =			5.70 inches,
	Height =		2.85 inches,
	Diagram =
V4,
(g9,32767,0
 (E10,0,0,0,1,1,0.053333,1,15,0,0,1,0,0,0,1,1,1,1,0.066667,0.066667,6,6,0,0.066
  667,6))>

<!Master Frame,
	Name =			"Following Anchor",
	Placement =		Following Anchor,
	Horizontal Alignment =	Center,
	Width =			5.70 inches,
	Height =		2.85 inches,
	Diagram =
V4,
(g9,32767,0
 (E10,0,0,0,1,1,0.053333,1,15,0,0,1,0,0,0,1,1,1,1,0.066667,0.066667,6,6,0,0.066
  667,6))>

<!Master Frame,
	Name =			"Following Text",
	Placement =		Following Text,
	Horizontal Alignment =	Center,
	Width =			5.70 inches,
	Height =		2.85 inches,
	Diagram =
V4,
(g9,32767,0
 (E10,0,0,0,1,1,0.053333,1,15,0,0,1,0,0,0,1,1,1,1,0.066667,0.066667,6,6,0,0.066
  667,6))>

<!Master Frame,
	Name =			Footnote,
	Placement =		Bottom of Page,
	Horizontal Alignment =	Left,
	Same Page =		yes,
	Width =			5.70 inches,
	Height =		0.204 inches,
	Diagram =
V4,
(g9,32767,0
 (E10,0,0,0,1,1,0.053333,1,15,0,0,1,0,0,0,1,1,1,1,0.066667,0.066667,6,6,0,0.066
  667,6))>

<!Master Frame,
	Name =			Top,
	Placement =		Top of Page,
	Horizontal Alignment =	Center,
	Width =			5.70 inches,
	Height =		2.85 inches,
	Diagram =
V4,
(g9,32767,0
 (E10,0,0,0,1,1,0.053333,1,15,0,0,1,0,0,0,1,1,1,1,0.066667,0.066667,6,6,0,0.066
  667,6))>

<Page Header, Frame =
V4,
(g9,1,0
 (t8,1,4,5.698608,0.438782,2,17,@nnclas12b,May\ 27\,\ 1988)
 (t8,2,4,2.849304,0.438782,1,17,@nnclas12b,RCS\ Check-in\ Script)
 (t8,3,4,0,0.438782,0,17,@nnclas12b,rcsput)
 (E10,0,0,0,1,1,0.053333,1,15,0,0,1,0,0,0,1,1,1,1,0.066667,0.066667,6,6,0,0.066
  667,6))>

<Page Footer, Frame =
V4,
(g9,1,0
 (t8,1,4,5.698608,0.478772,2,17,@nnclas10,)
 (t8,2,4,2.849304,0.478772,1,17,@nnclas12b,-\ \240\ -)
 (t8,3,4,0,0.478772,0,17,@nnclas10,)
 (E10,0,0,0,1,1,0.053333,1,15,0,0,1,0,0,0,1,1,1,1,0.066667,0.066667,6,6,0,0.066
  667,6))>

<header>

<|,1>NAME

<paragraph>

<F31>rcsput<F0> <#1f> RCS check-in script

<header>

USAGE

<paragraph>

<F31>rcsput<F32> [options] [file-specifications]

<header>

SYNOPSIS

<paragraph>

<F31>Rcsput<F0> is a simple, easy to use interface to <F32>rcs<F0> 
(<F31>r<F0>evision <F31>c<F0>ontrol <F31>s<F0>ystem).  For each 
file specified as input, it checks differences against the previously 
archived version and prompts you for change history comments.

<header>

DESCRIPTION

<paragraph>

<F31>Rcsput<F0> uses the <F32>rcs<F0> utility <F31>ci<F0>  to maintain 
versions of a given source file in a dependent directory named <#7f>RCS":

<bullet>

<F6>S<F0><Tab>It checks to ensure that each file is indeed a text 
file (so that you do not accidentally archive <#7f>.o" files, for 
example).

<F6>S<F0><Tab>If you give <F31>rcsput<F0> a directory name, it 
will recur, checking-in files in the directory.

<F6>S<F0><Tab>For each file which has a corresponding <#7f>,v" file, <F31>rcs
put<F0> compares the two (using <F31>diff<F0>) and pipes the result 
through the pager.

<F6>S<F0><Tab>An option is provided so that you may direct <F31>rcsput<F0> 
to perform the differencing without checking the file into rcs.

<F6>S<F0><Tab>The <#7f>,v" file is post-processed by <F31>rcsput<F0> 
so that the check-in date matches the file's modification date.

<paragraph>

The last point is the fundamental advantage offered by <F31>rcsput<F0>.  
The ordinary <F32>rcs<F0> methodology uses the current date as the 
check-in date.  This works well only for large projects in which a 
central project administrator is responsible for controlling the versions 
of source files.  It does not work well for small projects, for which <F32>rcs
<F0>'s primary advantage is its compact storage of multiple versions 
of a file.

By using the file's modification date as a reference, you can more 
easily back up to a meaningful version <#1f> by date, rather than 
version number.

<F31>Rcsput<F0> integrates all of the functions used in the <F32>rcs<F0> 
check-in process into one utility program.

<header>

OPTIONS

<paragraph>

Some of the options which you may specify to <F31>rcsput<F0> are 
passed through to the underlying <F31>ci<F0> utility.  Others represent 
extensions:

<options>

<|,2>-<F31>b<F0><Tab>is passed to <F31>diff<F0>, and directs it 
to ignore trailing blanks on a line, and to treat repeated blanks 
as a single blank.

-<F31>c<F0><Tab>directs <F31>rcsput<F0> to use <F31>cat<F0> rather 
than the <F49>PAGER<F0> (usually <F31>more<F0>) to display differences.  
This is most useful in an Apollo pad, since the <F31>more<F0> program 
would otherwise switch to VT100 emulator mode.

-<F31>d<F0><Tab>instructs <F31>rcsput<F0> to test for differences, 
but not to check the files into <F32>rcs<F0>.

-<F31>L<F0> <F32>file<F0><Tab>causes <F31>rcsput<F0> to generate 
a log-file of the files which are processed, and all differences which 
are encountered.  The log-file is inherited in recursion to lower 
directory levels (i.e., it is written to the same place).

<header>

OPERATIONS

<paragraph>

The <F31>rcsput<F0> utility is designed for use in small development 
projects.  The methodology for this tool follows:

<bullet>

<F6>S<F0><Tab>Develop source files <#7f>normally".  Each file should 
contain rcs keywords (see <F32>ci<SP>(1)<F0>) so that you will be 
able to distinguish checked-out files.  The rcs keywords should appear 
at the top of your source file, for consistency.  In C language programs, 
the convention is to make a string which will permit the <F31>ident<F0> 
utility to show the versions of the modules which make up a program:

<fixed>

#ifndef<Tab>lint<HR>
static<Tab>char<Tab>ident[] = "$Header: /users/source/archives/cm_tools.vcs/user/RCS/rcsput.doc,v 1.1 1988/05/27 15:52:25 dickey Exp $";<HR>
#endif<Tab>lint

<bullet>

<F6>S<F0><Tab>Periodically archive (with rcsput) those versions 
of files which you wish to keep
<Frame,
	Name =			Footnote,
	Placement =		Bottom of Page,
	Horizontal Alignment =	Left,
	Same Page =		yes,
	Width =			5.70 inches,
	Height =		0.667 inches,
	Page # =		2,
	Diagram =
V4,
(g9,1,0
 (T8,1,12,0.066667,0.066667,5.546667,1,0.333333,0,516,0,17,0,0,0,0,0,0,1,1,2048
  ,512,102,1101,3,
<footnote>

<F6>!<F0><Tab>You should never have programs which have new features 
which you wish to keep, while there are defects in other parts of 
the program.  That would be an unsound approach to development!

<End Text>)
 (v4,2,0,0.026667,0,1.026666,0,17,1,0)
 (E10,0,0,0,1,1,0.053333,1,15,0,0,1,0,0,0,1,1,1,1,0.066667,0.066667,6,6,0,0.066
  667,6))>
<F6>!<F0>.

<F6>S<F0><Tab>When you reach the point of releasing the program, 
ensure that all source files have been checked-in.  The directory 
editor (<F31>ded<F0>) is useful for reviewing the check-in dates.

<F6>S<F0><Tab>Copy the directory containing your program to the 
release directory.  Purge all files, except those which are stored 
in the <F32>rcs<F0> subdirectories.  Use <F31>rcsget<F0> to extract 
the files
<Frame,
	Name =			Footnote,
	Placement =		Bottom of Page,
	Horizontal Alignment =	Left,
	Same Page =		yes,
	Width =			5.70 inches,
	Height =		0.333 inches,
	Page # =		2,
	Diagram =
V4,
(g9,1,0
 (T8,1,12,0.066667,0,5.546667,1,0.333333,0,516,0,17,0,0,0,0,0,0,1,1,2048,512,10
  2,1101,3,
<footnote>

<F6>@<F0><Tab>The unadorned <F31>co<F0> utility will work, of course, 
but it retains the file modification dates.  You may also use checkout 
to retain file dates.

<End Text>)
 (E10,0,0,0,1,1,0.053333,1,15,0,0,1,0,0,0,1,1,1,1,0.066667,0.066667,6,6,0,0.066
  667,6))>
<F6>@<F0>.

<|,3><F6>S<F0><Tab>Ensure that all files have been checked-in and 
released.  You may use <F31>diff<F0> to compare the directories <#1f> 
the only differences should be the substituted <F32>rcs<F0> keywords.

<F6>S<F0><Tab>Build the released version of your program.  All files 
should be present.  No embedded path names should refer to your development 
copy.  To ensure good isolation, you may change the permissions on 
your development directory temporarily.

<paragraph>

When checking files into <F32>rcs<F0>, it is a good idea to make 
a test run (using the <#7f>-<F31>d<F0>" option) so that you can inspect 
the differences.  For example, you may have forgotten to remove (or 
bypass) debugging stubs.  Or, you may have been editing a checked-out 
file (with the <F32>rcs<F0> keywords substituted).  <F31>Rcsput<F0> 
would archive this anyway.

<header>

ENVIRONMENT

<paragraph>

<F31>Rcsput<F0> is a Bourne shell script.  On Apollo DOMAIN/IX, it 
uses System<SP>5 features including <F32>dirname<SP>(1)<F0> and <F32>getopt<SP>
(1)<F0>.

Environment variables imported by <F31>rcsput<F0> include:

<F31>Rcsput<F0> also uses the following environment variables:

<options>

<F49>PAGER<F0><Tab>identifies the program to use in displaying differences 
between the file which is being checked in, and the previously archived 
version.  There may be a lot of differences <#1f> more than can be 
shown on one screen.

<F49>RUNLIB<F0><Tab>identifies the execution path of this tool, and 
subordinate components (e.g., <F31>rcsbase<F0>).

<header>

FILES

<paragraph>

<F31>Rcsput<F0> uses the following files

<options>

<F49>rcsput<F0><Tab>the Bourne shell script

<F49>checkin<F0><Tab>A utility which invokes <F31>ci<F0>, and modifies 
the <F32>rcs<F0> <#7f>,v" file after check-in so that the check-in 
date matches the file's modification date.

<header>

ANTICIPATED CHANGES

<paragraph>

Provide a mechanism for inserting dummy version numbers so that <F31>rcsput
<F0> can bump the release number (for genuine major releases).  Currently, 
the revision numbers are interpreted only as the underlying RCS utilities 
do them.  To handle major release numbers requires a scan of the group 
of files affected to ensure that there are no conflicts.

<header>

<|,4>SEE ALSO

<paragraph>

checkin, rcsget, checkout, ded, ci<SP>(1), co<SP>(1), diff<SP>(1), 
ident<SP>(1)

<header>

AUTHOR:

<paragraph>

Thomas Dickey (Software Productivity Consortium).

